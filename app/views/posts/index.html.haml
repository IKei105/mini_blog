%body.posts-index
  %div.post-area

    %div.post-area__header
      %h1.post-area__title 投稿一覧

    %div.post-area__form-container
      = form_with model: @post, local: true do |f|
        = f.text_area :content, class: "post-area__textarea", placeholder: "投稿内容を入力", maxlength: 140
        = f.submit "投稿する", class: "post-area__submit-button btn btn-primary"

    %div.pagination-container
      %ul.post-area__list
        - @posts.each do |post|
          %li.post-area__item
            %div.post-area__header
              %p.post-area__username= post.user&.userid || "削除されたユーザー"
              - if user_signed_in? && current_user != post.user
                - if current_user.follow_users.include?(post.user)
                  = button_to 'フォロー中', follow_path(post.user), method: :delete, data: { turbo: false }, class: 'btn btn-outline-danger unfollow-button'
                - else
                  = button_to 'フォロー', follows_path(follow_user_id: post.user.id), method: :post, data: { turbo: false }, class: 'btn btn-primary follow-button'
            %p.post-area__content= post.content
            %span.post-area__date= post.created_at.strftime("(%Y/%m/%d %H:%M)")
      %div.pagination-button-container
      = will_paginate @posts
